"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UrlGenerator = void 0;
const factories_1 = require("../factories");
class UrlGenerator {
    constructor(config, table, validators = (0, factories_1.makeUrlValidators)()) {
        this.config = config;
        this.table = table;
        this.validators = validators;
        this.url = '';
        this.setTable(table);
    }
    setTable(table) {
        if (table) {
            this.url = `${this.config.baseUrl}/${table.tableName}?api_key=${this.config.apiKey}`;
        }
    }
    getUrl(dataInstance, table) {
        this.setTable(table);
        this.validators.forEach((validator) => {
            this.url = validator.validate(this.url, dataInstance);
        });
        return this.url;
    }
}
exports.UrlGenerator = UrlGenerator;
